# Fitness Stand v. 1.0.2
<a href="https://play.google.com/store/apps/details?id=eu.marcellofabbri.fitnessstandandroid">
  <img  height="60" src="https://play.google.com/intl/en_gb/badges/static/images/badges/en_badge_web_generic.png">
</a>

<p align="center">
  <img width="1024" height="230" src="https://github.com/Marcellofabbri/fitnessStand_Android/blob/master/app/src/main/res/drawable/fitness_stand_logo_2.png">
</p>

A mobile (Android) app that lets the user log their workout sessions and organize them per workout type. The name is a pun on a court's witness stand. Fitness Stand will testify about the user's performance and paint a picture meant to indicate how they're faring against their self-set standards.


![screenshots](https://github.com/Marcellofabbri/fitnessStand_Android/blob/master/app/src/main/res/drawable/github_screenshots.png)

### Requirements
Running the app on a laptop normally requires [Android Studio](https://developer.android.com/studio), through which it can be installed and run on an emulator. It might be possible to run it with different IDEs as long as [Java Development Kit](https://www.oracle.com/java/technologies/javase-downloads.html) is installed.
Make sure you sync the ```build.gradle``` file to have all necessary dependencies installed.

## Architecture: MVVM
![MVVM](https://developer.android.com/topic/libraries/architecture/images/final-architecture.png)

***Model - View - ViewModel***: a three layers architecture, for which the Model deals with all the business logic, the ViewModel acts as the middleman and gets passed data on by the model and brings it to the top layer, the View (responsible for rendering the data and some lightweight logic associated with the displaying of it.

#### Model
- An **SQLite** database is where the data is stored. With the library [Room](https://developer.android.com/topic/libraries/architecture/room?gclid=CjwKCAjw_qb3BRAVEiwAvwq6VopJnuUQOQsDU4eT8mHioF8-izRbMVO6vVOBxM02_pTzZDK086uzihoCbQMQAvD_BwE&gclsrc=aw.ds) the entity class can link up nicely with the database.
- The **Entity Workout**: its fields (and table columns) are _name_, _weeklyTarget_, _durationTarget_, as well as an autogenerated _id_.
- The **Entity Session**: its fields (and table columns) are _duration_, _date_, _workoutName_, as well as an autogenerated _id_.
- The **DAO** classes are assisted again by ```Room``` to link them up with the database. The DAO is an interface that describes CRUD operations, and SQL queries that can return [LiveData](https://developer.android.com/topic/libraries/architecture/livedata) objects, a class into which the raw data can be wrapped. LiveData can be observed and interacted with from the outer layer. There's a DAO for every entity.
- The **Database** class extends ```RoomDatabase``` and creates a singleton that holds the DAO and can create one instance of itself or retrieve an existing one.
- The **Repository** classes (one per DAO class) use the ```Database``` to create a ```DAO``` upon instantiation and implements each method of the interface. The class has one subclass for each ```DAO``` method, extending ```AsyncTask```, where the ```DAO``` method is actually implemented. The parent class (```Repository```) implements each method by adopting an instance of the intended subclass and making it call ```execute()```. The ```LiveData``` travels from the ```DAO``` all the way to the ```Repository```.

#### ViewModel
- The **ViewModel** classes extend ```AndroidViewModel``` and there's one for every Repository class (therefore, for every entity). It has ```Repository``` and the retrieved ```LiveData``` as fields. It uses its instance of ```Repository``` to wrap and perform all the methods expressed in that class, which reflect the original ones according to the ```DAO``` and the ```Entity```.

#### View
- The **Activity** lists the ```ViewModel``` amongst its fields and holds all objects in it. Every action sparks a method on the ```ViewModel``` unless it's about a purely graphical purpose. It uses the ```ViewModel``` to ```observe``` the entries that have a startime on a certain date: since the data is wrapped in ```LiveData``` (which is observable), the View is automatically refreshed when the LiveData changes.
- A **RecyclerView** class holds a list of the SQLite database entries according to the date.
- The **Adapter** is what makes the ```RecyclerView``` work. Each database line is wrapped in a ```Holder``` subclass of Adapter.

### Features (v.1.0.2)
#### Add a workout
Before being able to do anything there needs to be one or more workouts. Afterwards it'll be possible to select one of the workouts and add data related to them, but first it's necessary to click on the **+** button on the top left corner to access a Dialog the lets the user add a new workout and all its details, such as its name, the desired training frequency in a month, and the desired optimal length of each session of that workout.
#### Click on a workout
When workouts have been added they'll appear in a horizontally scrollable view at the top. Tapping one of the containers that shows the workouts names will have that workout be selected, and its name and stats will update across the page.
#### Edit and Delete buttons
The *Edit* button uses the same dialog as the *Add* button, but with the editTexts already filled. Saving the workout will update that workout in the database.
The *Delete* button will lead to a dialog that prompts the user to choose between returning to the page and going ahead with the deletion of the workout and all its associated sessions.
#### Calendar
- No library was useful to build the calendar, while the inbuilt CalendarView by Android wasn't customizable enough, therefore this is the result of a custom made calendar, build from scratch by using a GridView to display the calendar per se, and another Gridview to display the red squircles that identify where in the months sessions have been logged.
- Each cell of the GridView isn't clickable when no workouts are in the database. When at least one workout exists and is selected each cell can be clicked. Pressing on a cell with a session will provide a dialog with the overview of that sessios (plus a delete button). LongPressing an empty cell will prompt a dialog to enter a new session.
#### Stats
- The header changes programmatically to be in sync with the month displayed by the calendar.
- Total monthly sessions are displayed in the top left corner along with a gauge rendered through a library called [CustomGauge](https://github.com/pkleczko/CustomGauge).
- Total duration will show in the bottom left corner how many minutes all the sessions of the selected workout amount to in the current month.
- Monthly and weekly targets of number of sessions in a month are displayed on the tor right corner of the Stats panel.
- The bottom right corner shows the average duration of the sessions in that month, along with an original custom made Bar view (no libraries).
